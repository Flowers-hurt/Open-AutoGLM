# Phone Agent ä½¿ç”¨æ•™ç¨‹

æœ¬æ•™ç¨‹å°†è¯¦ç»†ä»‹ç» Phone Agent çš„å„ç§ä½¿ç”¨æ–¹æ³•å’Œé«˜çº§åŠŸèƒ½ã€‚

## ğŸ“– ç›®å½•

1. [åŸºç¡€ä½¿ç”¨](#åŸºç¡€ä½¿ç”¨)
2. [å‘½ä»¤è¡Œå‚æ•°](#å‘½ä»¤è¡Œå‚æ•°)
3. [Python API ä½¿ç”¨](#python-api-ä½¿ç”¨)
4. [æ”¯æŒçš„æ“ä½œ](#æ”¯æŒçš„æ“ä½œ)
5. [é«˜çº§åŠŸèƒ½](#é«˜çº§åŠŸèƒ½)
6. [è¿œç¨‹è°ƒè¯•](#è¿œç¨‹è°ƒè¯•)
7. [è‡ªå®šä¹‰é…ç½®](#è‡ªå®šä¹‰é…ç½®)
8. [å®ç”¨æŠ€å·§](#å®ç”¨æŠ€å·§)

---

## ğŸ¯ åŸºç¡€ä½¿ç”¨

### 1. å•æ¬¡ä»»åŠ¡æ‰§è¡Œ

ç›´æ¥åœ¨å‘½ä»¤è¡ŒæŒ‡å®šä»»åŠ¡ï¼š

```bash
# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source venv/bin/activate

# æ‰§è¡Œå•ä¸ªä»»åŠ¡
python main.py \
  --base-url https://open.bigmodel.cn/api/paas/v4 \
  --model autoglm-phone \
  --apikey ä½ çš„APIå¯†é’¥ \
  "æ‰“å¼€ç¾å›¢æœç´¢é™„è¿‘çš„ç«é”…åº—"
```

### 2. äº¤äº’æ¨¡å¼

è¿›å…¥äº¤äº’æ¨¡å¼ï¼Œå¯ä»¥è¿ç»­æ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼š

```bash
python main.py \
  --base-url https://open.bigmodel.cn/api/paas/v4 \
  --model autoglm-phone \
  --apikey ä½ çš„APIå¯†é’¥

# è¿›å…¥äº¤äº’æ¨¡å¼å
Enter your task: æ‰“å¼€æ·˜å®æœç´¢æ— çº¿è€³æœº
# ä»»åŠ¡æ‰§è¡Œå®Œæˆå
Enter your task: æ‰“å¼€å¾®ä¿¡
# è¾“å…¥ quit æˆ– exit é€€å‡º
Enter your task: quit
```

### 3. ä½¿ç”¨ç¯å¢ƒå˜é‡

è®¾ç½®ç¯å¢ƒå˜é‡é¿å…æ¯æ¬¡è¾“å…¥å‚æ•°ï¼š

```bash
# è®¾ç½®ç¯å¢ƒå˜é‡
export PHONE_AGENT_BASE_URL="https://open.bigmodel.cn/api/paas/v4"
export PHONE_AGENT_MODEL="autoglm-phone"
export PHONE_AGENT_API_KEY="ä½ çš„APIå¯†é’¥"

# ç›´æ¥è¿è¡Œ
python main.py "æ‰“å¼€æŠ–éŸ³åˆ·è§†é¢‘"
```

---

## âš™ï¸ å‘½ä»¤è¡Œå‚æ•°

### æ¨¡å‹ç›¸å…³å‚æ•°

| å‚æ•° | è¯´æ˜ | é»˜è®¤å€¼ | ç¤ºä¾‹ |
|------|------|--------|------|
| `--base-url` | æ¨¡å‹ API åœ°å€ | `http://localhost:8000/v1` | `https://open.bigmodel.cn/api/paas/v4` |
| `--model` | æ¨¡å‹åç§° | `autoglm-phone-9b` | `autoglm-phone` |
| `--apikey` | API å¯†é’¥ | `EMPTY` | `sk-xxxxx` |
| `--max-steps` | æœ€å¤§æ‰§è¡Œæ­¥æ•° | `100` | `50` |
| `--lang` | ç³»ç»Ÿæç¤ºè¯­è¨€ | `cn` | `en` |

### è®¾å¤‡ç›¸å…³å‚æ•°

| å‚æ•° | è¯´æ˜ | é»˜è®¤å€¼ | ç¤ºä¾‹ |
|------|------|--------|------|
| `--device-type` | è®¾å¤‡ç±»å‹ | `adb` | `adb`, `hdc`, `ios` |
| `--device-id` | è®¾å¤‡ ID | è‡ªåŠ¨æ£€æµ‹ | `emulator-5554` |
| `--wda-url` | WebDriverAgent URL (iOS) | `http://localhost:8100` | `http://192.168.1.100:8100` |

### åŠŸèƒ½å‚æ•°

| å‚æ•° | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `--list-devices` | åˆ—å‡ºå·²è¿æ¥è®¾å¤‡ | `python main.py --list-devices` |
| `--list-apps` | åˆ—å‡ºæ”¯æŒçš„åº”ç”¨ | `python main.py --list-apps` |
| `--connect` | è¿æ¥è¿œç¨‹è®¾å¤‡ | `python main.py --connect 192.168.1.100:5555` |
| `--disconnect` | æ–­å¼€è¿œç¨‹è®¾å¤‡ | `python main.py --disconnect 192.168.1.100:5555` |
| `--enable-tcpip` | å¯ç”¨ TCP/IP è°ƒè¯• | `python main.py --enable-tcpip 5555` |
| `--quiet` | é™é»˜æ¨¡å¼ | `python main.py --quiet "æ‰“å¼€å¾®ä¿¡"` |

### å®Œæ•´ç¤ºä¾‹

```bash
# Android è®¾å¤‡ - å®Œæ•´å‚æ•°
python main.py \
  --device-type adb \
  --device-id emulator-5554 \
  --base-url https://open.bigmodel.cn/api/paas/v4 \
  --model autoglm-phone \
  --apikey sk-xxxxx \
  --max-steps 50 \
  --lang cn \
  "æ‰“å¼€æ·˜å®æœç´¢æ— çº¿è€³æœº"

# HarmonyOS è®¾å¤‡
python main.py \
  --device-type hdc \
  --base-url https://open.bigmodel.cn/api/paas/v4 \
  --model autoglm-phone \
  --apikey sk-xxxxx \
  "æ‰“å¼€ç¾å›¢æœç´¢é™„è¿‘çš„ç«é”…åº—"

# iOS è®¾å¤‡
python main.py \
  --device-type ios \
  --wda-url http://localhost:8100 \
  --base-url https://open.bigmodel.cn/api/paas/v4 \
  --model autoglm-phone \
  --apikey sk-xxxxx \
  "Open Safari and search for iPhone tips"
```

---

## ğŸ Python API ä½¿ç”¨

### 1. åŸºç¡€ç”¨æ³•

```python
from phone_agent import PhoneAgent
from phone_agent.model import ModelConfig
from phone_agent.agent import AgentConfig

# é…ç½®æ¨¡å‹
model_config = ModelConfig(
    base_url="https://open.bigmodel.cn/api/paas/v4",
    model_name="autoglm-phone",
    api_key="ä½ çš„APIå¯†é’¥",
)

# é…ç½® Agent
agent_config = AgentConfig(
    max_steps=100,
    verbose=True,  # æ˜¾ç¤ºè¯¦ç»†æ—¥å¿—
    lang="cn",
)

# åˆ›å»º Agent
agent = PhoneAgent(
    model_config=model_config,
    agent_config=agent_config,
)

# æ‰§è¡Œä»»åŠ¡
result = agent.run("æ‰“å¼€æ·˜å®æœç´¢æ— çº¿è€³æœº")
print(f"ä»»åŠ¡ç»“æœ: {result}")
```

### 2. æ‰¹é‡ä»»åŠ¡æ‰§è¡Œ

```python
from phone_agent import PhoneAgent
from phone_agent.model import ModelConfig

# åˆ›å»º Agent
model_config = ModelConfig(
    base_url="https://open.bigmodel.cn/api/paas/v4",
    model_name="autoglm-phone",
    api_key="ä½ çš„APIå¯†é’¥",
)
agent = PhoneAgent(model_config=model_config)

# å®šä¹‰ä»»åŠ¡åˆ—è¡¨
tasks = [
    "æ‰“å¼€ç¾å›¢æœç´¢é™„è¿‘çš„ç«é”…åº—",
    "æ‰“å¼€æ·˜å®æœç´¢æ— çº¿è€³æœº",
    "æ‰“å¼€æŠ–éŸ³åˆ·è§†é¢‘",
]

# æ‰¹é‡æ‰§è¡Œ
for task in tasks:
    print(f"\næ‰§è¡Œä»»åŠ¡: {task}")
    result = agent.run(task)
    print(f"ç»“æœ: {result}")
    
    # é‡ç½® Agent çŠ¶æ€
    agent.reset()
```

### 3. è‡ªå®šä¹‰å›è°ƒå‡½æ•°

```python
from phone_agent import PhoneAgent
from phone_agent.model import ModelConfig

def my_confirmation(message: str) -> bool:
    """æ•æ„Ÿæ“ä½œç¡®è®¤å›è°ƒ"""
    print(f"\nâš ï¸  æ•æ„Ÿæ“ä½œ: {message}")
    response = input("æ˜¯å¦ç»§ç»­ï¼Ÿ(y/n): ")
    return response.lower() == 'y'

def my_takeover(message: str) -> None:
    """äººå·¥æ¥ç®¡å›è°ƒ"""
    print(f"\nğŸ¤š éœ€è¦äººå·¥ä»‹å…¥: {message}")
    input("è¯·æ‰‹åŠ¨å®Œæˆæ“ä½œåæŒ‰å›è½¦ç»§ç»­...")

# åˆ›å»ºå¸¦å›è°ƒçš„ Agent
model_config = ModelConfig(
    base_url="https://open.bigmodel.cn/api/paas/v4",
    model_name="autoglm-phone",
    api_key="ä½ çš„APIå¯†é’¥",
)

agent = PhoneAgent(
    model_config=model_config,
    confirmation_callback=my_confirmation,
    takeover_callback=my_takeover,
)

# æ‰§è¡Œä»»åŠ¡
agent.run("æ‰“å¼€æ”¯ä»˜å®è½¬è´¦ç»™å¼ ä¸‰")
```

### 4. å•æ­¥è°ƒè¯•æ¨¡å¼

```python
from phone_agent import PhoneAgent
from phone_agent.model import ModelConfig
from phone_agent.agent import AgentConfig

# åˆ›å»º Agentï¼ˆå¯ç”¨ verboseï¼‰
model_config = ModelConfig(
    base_url="https://open.bigmodel.cn/api/paas/v4",
    model_name="autoglm-phone",
    api_key="ä½ çš„APIå¯†é’¥",
)

agent_config = AgentConfig(
    max_steps=100,
    verbose=True,  # æ˜¾ç¤ºæ¯ä¸€æ­¥çš„æ€è€ƒå’ŒåŠ¨ä½œ
)

agent = PhoneAgent(
    model_config=model_config,
    agent_config=agent_config,
)

# æ‰§è¡Œä»»åŠ¡ï¼Œè§‚å¯Ÿæ¯ä¸€æ­¥
result = agent.run("æ‰“å¼€å°çº¢ä¹¦æœç´¢ç¾é£Ÿæ”»ç•¥")
```

---

## ğŸ® æ”¯æŒçš„æ“ä½œ

Phone Agent å¯ä»¥æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š

### 1. Launch - å¯åŠ¨åº”ç”¨

```python
# ç¤ºä¾‹ä»»åŠ¡
"æ‰“å¼€å¾®ä¿¡"
"å¯åŠ¨æ·˜å®"
"æ‰“å¼€ç¾å›¢"
```

**AI ç”Ÿæˆçš„åŠ¨ä½œï¼š**
```json
{
  "_metadata": "do",
  "action": "Launch",
  "app": "å¾®ä¿¡"
}
```

### 2. Tap - ç‚¹å‡»

```python
# ç¤ºä¾‹ä»»åŠ¡
"ç‚¹å‡»æœç´¢æ¡†"
"ç‚¹å‡»ç¡®è®¤æŒ‰é’®"
```

**AI ç”Ÿæˆçš„åŠ¨ä½œï¼š**
```json
{
  "_metadata": "do",
  "action": "Tap",
  "element": [500, 300]  // åæ ‡ [x, y]
}
```

### 3. Type - è¾“å…¥æ–‡æœ¬

```python
# ç¤ºä¾‹ä»»åŠ¡
"åœ¨æœç´¢æ¡†è¾“å…¥'æ— çº¿è€³æœº'"
"è¾“å…¥ç”¨æˆ·å'zhangsan'"
```

**AI ç”Ÿæˆçš„åŠ¨ä½œï¼š**
```json
{
  "_metadata": "do",
  "action": "Type",
  "text": "æ— çº¿è€³æœº"
}
```

### 4. Swipe - æ»‘åŠ¨

```python
# ç¤ºä¾‹ä»»åŠ¡
"å‘ä¸Šæ»‘åŠ¨"
"å‘ä¸‹åˆ·æ–°"
"å‘å·¦æ»‘åŠ¨"
```

**AI ç”Ÿæˆçš„åŠ¨ä½œï¼š**
```json
{
  "_metadata": "do",
  "action": "Swipe",
  "direction": "up"  // up, down, left, right
}
```

### 5. Back - è¿”å›

```python
# ç¤ºä¾‹ä»»åŠ¡
"è¿”å›ä¸Šä¸€é¡µ"
"è¿”å›"
```

**AI ç”Ÿæˆçš„åŠ¨ä½œï¼š**
```json
{
  "_metadata": "do",
  "action": "Back"
}
```

### 6. Home - è¿”å›æ¡Œé¢

```python
# ç¤ºä¾‹ä»»åŠ¡
"è¿”å›æ¡Œé¢"
"å›åˆ°ä¸»å±å¹•"
```

**AI ç”Ÿæˆçš„åŠ¨ä½œï¼š**
```json
{
  "_metadata": "do",
  "action": "Home"
}
```

### 7. Long Press - é•¿æŒ‰

```python
# ç¤ºä¾‹ä»»åŠ¡
"é•¿æŒ‰å›¾æ ‡"
```

**AI ç”Ÿæˆçš„åŠ¨ä½œï¼š**
```json
{
  "_metadata": "do",
  "action": "Long Press",
  "element": [500, 300]
}
```

### 8. Wait - ç­‰å¾…

```python
# AI ä¼šè‡ªåŠ¨åˆ¤æ–­æ˜¯å¦éœ€è¦ç­‰å¾…é¡µé¢åŠ è½½
```

**AI ç”Ÿæˆçš„åŠ¨ä½œï¼š**
```json
{
  "_metadata": "do",
  "action": "Wait",
  "duration": 2  // ç§’
}
```

### 9. Take_over - äººå·¥æ¥ç®¡

```python
# é‡åˆ°ç™»å½•ã€éªŒè¯ç ç­‰åœºæ™¯æ—¶ï¼ŒAI ä¼šè¯·æ±‚äººå·¥æ¥ç®¡
```

**AI ç”Ÿæˆçš„åŠ¨ä½œï¼š**
```json
{
  "_metadata": "do",
  "action": "Take_over",
  "reason": "éœ€è¦è¾“å…¥éªŒè¯ç "
}
```

---

## ğŸš€ é«˜çº§åŠŸèƒ½

### 1. å¤šè®¾å¤‡ç®¡ç†

```bash
# åˆ—å‡ºæ‰€æœ‰è®¾å¤‡
python main.py --list-devices

# è¾“å‡ºç¤ºä¾‹ï¼š
# Connected devices:
# ------------------------------------------------------------
#   âœ“ emulator-5554                  [usb]
#   âœ“ 192.168.1.100:5555             [wifi]

# æŒ‡å®šè®¾å¤‡æ‰§è¡Œä»»åŠ¡
python main.py \
  --device-id emulator-5554 \
  --base-url https://open.bigmodel.cn/api/paas/v4 \
  --model autoglm-phone \
  --apikey ä½ çš„APIå¯†é’¥ \
  "æ‰“å¼€å¾®ä¿¡"
```

### 2. æŸ¥çœ‹æ”¯æŒçš„åº”ç”¨

```bash
# Android è®¾å¤‡
python main.py --list-apps

# HarmonyOS è®¾å¤‡
python main.py --device-type hdc --list-apps

# iOS è®¾å¤‡
python main.py --device-type ios --list-apps
```

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
Supported Android apps:
  - å¾®ä¿¡
  - QQ
  - æ·˜å®
  - äº¬ä¸œ
  - ç¾å›¢
  - æŠ–éŸ³
  - bilibili
  - å°çº¢ä¹¦
  ...
```

### 3. Verbose æ¨¡å¼

å¯ç”¨è¯¦ç»†æ—¥å¿—ï¼ŒæŸ¥çœ‹ AI çš„æ€è€ƒè¿‡ç¨‹ï¼š

```bash
python main.py \
  --base-url https://open.bigmodel.cn/api/paas/v4 \
  --model autoglm-phone \
  --apikey ä½ çš„APIå¯†é’¥ \
  "æ‰“å¼€å°çº¢ä¹¦æœç´¢ç¾é£Ÿæ”»ç•¥"
```

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
==================================================
ğŸ’­ æ€è€ƒè¿‡ç¨‹:
--------------------------------------------------
å½“å‰åœ¨ç³»ç»Ÿæ¡Œé¢ï¼Œéœ€è¦å…ˆå¯åŠ¨å°çº¢ä¹¦åº”ç”¨
--------------------------------------------------
ğŸ¯ æ‰§è¡ŒåŠ¨ä½œ:
{
  "_metadata": "do",
  "action": "Launch",
  "app": "å°çº¢ä¹¦"
}
==================================================

... (æ‰§è¡ŒåŠ¨ä½œåç»§ç»­ä¸‹ä¸€æ­¥)

==================================================
ğŸ’­ æ€è€ƒè¿‡ç¨‹:
--------------------------------------------------
å°çº¢ä¹¦å·²æ‰“å¼€ï¼Œç°åœ¨éœ€è¦ç‚¹å‡»æœç´¢æ¡†
--------------------------------------------------
ğŸ¯ æ‰§è¡ŒåŠ¨ä½œ:
{
  "_metadata": "do",
  "action": "Tap",
  "element": [500, 100]
}
==================================================
```

### 4. è‹±æ–‡æ¨¡å¼

ä½¿ç”¨è‹±æ–‡ç³»ç»Ÿæç¤ºè¯ï¼š

```bash
python main.py \
  --lang en \
  --base-url https://open.bigmodel.cn/api/paas/v4 \
  --model autoglm-phone \
  --apikey ä½ çš„APIå¯†é’¥ \
  "Open Chrome browser"
```

---

## ğŸŒ è¿œç¨‹è°ƒè¯•

### 1. å¯ç”¨ WiFi è°ƒè¯•

#### åœ¨æ‰‹æœºç«¯
1. ç¡®ä¿æ‰‹æœºå’Œç”µè„‘åœ¨åŒä¸€ WiFi ç½‘ç»œ
2. æ‰“å¼€ `è®¾ç½® â†’ å¼€å‘è€…é€‰é¡¹ â†’ æ— çº¿è°ƒè¯•`
3. è®°å½•æ˜¾ç¤ºçš„ IP åœ°å€å’Œç«¯å£ï¼ˆå¦‚ `192.168.1.100:5555`ï¼‰

#### åœ¨ç”µè„‘ç«¯
```bash
# æ–¹å¼ 1ï¼šä½¿ç”¨ main.py è¿æ¥
python main.py --connect 192.168.1.100:5555

# æ–¹å¼ 2ï¼šä½¿ç”¨ adb å‘½ä»¤
adb connect 192.168.1.100:5555

# éªŒè¯è¿æ¥
adb devices
# è¾“å‡º: 192.168.1.100:5555    device
```

### 2. å¯ç”¨ TCP/IP æ¨¡å¼ï¼ˆUSB è½¬ WiFiï¼‰

```bash
# 1. å…ˆç”¨ USB è¿æ¥è®¾å¤‡
adb devices

# 2. å¯ç”¨ TCP/IP æ¨¡å¼
python main.py --enable-tcpip 5555

# 3. è®°å½•æ˜¾ç¤ºçš„ IP åœ°å€ï¼Œç„¶åæ‹”æ‰ USB çº¿

# 4. é€šè¿‡ WiFi è¿æ¥
python main.py --connect 192.168.1.100:5555

# 5. æ‰§è¡Œä»»åŠ¡
python main.py \
  --device-id 192.168.1.100:5555 \
  --base-url https://open.bigmodel.cn/api/paas/v4 \
  --model autoglm-phone \
  --apikey ä½ çš„APIå¯†é’¥ \
  "æ‰“å¼€æŠ–éŸ³åˆ·è§†é¢‘"
```

### 3. æ–­å¼€è¿œç¨‹è¿æ¥

```bash
# æ–­å¼€æŒ‡å®šè®¾å¤‡
python main.py --disconnect 192.168.1.100:5555

# æ–­å¼€æ‰€æœ‰è¿œç¨‹è®¾å¤‡
python main.py --disconnect all
```

---

## ğŸ”§ è‡ªå®šä¹‰é…ç½®

### 1. ä¿®æ”¹ç³»ç»Ÿæç¤ºè¯

ç¼–è¾‘ `phone_agent/config/prompts_zh.py`ï¼ˆä¸­æ–‡ï¼‰æˆ– `prompts_en.py`ï¼ˆè‹±æ–‡ï¼‰ï¼š

```python
# phone_agent/config/prompts_zh.py

SYSTEM_PROMPT = """
ä½ æ˜¯ä¸€ä¸ªæ‰‹æœºæ“ä½œåŠ©æ‰‹ï¼Œå¯ä»¥å¸®åŠ©ç”¨æˆ·å®Œæˆå„ç§æ‰‹æœºä»»åŠ¡ã€‚

# ä½ çš„èƒ½åŠ›
- å¯åŠ¨åº”ç”¨
- ç‚¹å‡»å±å¹•
- è¾“å…¥æ–‡æœ¬
- æ»‘åŠ¨å±å¹•
...

# è‡ªå®šä¹‰è§„åˆ™
- ç¦æ­¢è®¿é—®é“¶è¡Œç±»åº”ç”¨
- é‡åˆ°æ”¯ä»˜åœºæ™¯å¿…é¡»è¯·æ±‚äººå·¥ç¡®è®¤
...
"""
```

### 2. æ·»åŠ æ”¯æŒçš„åº”ç”¨

ç¼–è¾‘ `phone_agent/config/apps.py`ï¼ˆAndroidï¼‰ï¼š

```python
# phone_agent/config/apps.py

APP_PACKAGES = {
    "å¾®ä¿¡": "com.tencent.mm",
    "QQ": "com.tencent.mobileqq",
    "æ·˜å®": "com.taobao.taobao",
    
    # æ·»åŠ æ–°åº”ç”¨
    "ä½ çš„åº”ç”¨": "com.example.app",
}
```

### 3. é…ç½®æ¨¡å‹å‚æ•°

```python
from phone_agent.model import ModelConfig

config = ModelConfig(
    base_url="https://open.bigmodel.cn/api/paas/v4",
    api_key="ä½ çš„APIå¯†é’¥",
    model_name="autoglm-phone",
    max_tokens=3000,        # æœ€å¤§è¾“å‡º token æ•°
    temperature=0.1,        # é‡‡æ ·æ¸©åº¦ï¼ˆè¶Šä½è¶Šç¡®å®šï¼‰
    frequency_penalty=0.2,  # é¢‘ç‡æƒ©ç½š
)
```

---

## ğŸ’¡ å®ç”¨æŠ€å·§

### 1. ä»»åŠ¡æè¿°æŠ€å·§

**âœ… å¥½çš„ä»»åŠ¡æè¿°ï¼š**
```python
"æ‰“å¼€ç¾å›¢ï¼Œæœç´¢é™„è¿‘çš„ç«é”…åº—ï¼ŒæŒ‰è¯„åˆ†æ’åº"
"æ‰“å¼€æ·˜å®ï¼Œæœç´¢æ— çº¿è€³æœºï¼Œä»·æ ¼100-300å…ƒ"
"æ‰“å¼€å°çº¢ä¹¦ï¼Œæœç´¢ç¾é£Ÿæ”»ç•¥ï¼Œç‚¹èµå‰3æ¡"
```

**âŒ ä¸å¥½çš„ä»»åŠ¡æè¿°ï¼š**
```python
"å¸®æˆ‘æ‰¾ç«é”…åº—"  # å¤ªæ¨¡ç³Š
"æ‰“å¼€åº”ç”¨"      # æ²¡æœ‰æŒ‡å®šåº”ç”¨
"æœç´¢"          # æ²¡æœ‰æŒ‡å®šæœç´¢å†…å®¹
```

### 2. åˆ†æ­¥æ‰§è¡Œå¤æ‚ä»»åŠ¡

å¯¹äºå¤æ‚ä»»åŠ¡ï¼Œå»ºè®®åˆ†æ­¥æ‰§è¡Œï¼š

```python
from phone_agent import PhoneAgent
from phone_agent.model import ModelConfig

model_config = ModelConfig(
    base_url="https://open.bigmodel.cn/api/paas/v4",
    model_name="autoglm-phone",
    api_key="ä½ çš„APIå¯†é’¥",
)
agent = PhoneAgent(model_config=model_config)

# æ­¥éª¤ 1ï¼šæ‰“å¼€åº”ç”¨
agent.run("æ‰“å¼€ç¾å›¢")
agent.reset()

# æ­¥éª¤ 2ï¼šæœç´¢
agent.run("æœç´¢é™„è¿‘çš„ç«é”…åº—")
agent.reset()

# æ­¥éª¤ 3ï¼šç­›é€‰
agent.run("æŒ‰è¯„åˆ†ä»é«˜åˆ°ä½æ’åº")
```

### 3. å¤„ç†æ•æ„Ÿæ“ä½œ

```python
def safe_confirmation(message: str) -> bool:
    """å®‰å…¨ç¡®è®¤å›è°ƒ"""
    # è‡ªåŠ¨æ‹’ç»æ”¯ä»˜ç›¸å…³æ“ä½œ
    if "æ”¯ä»˜" in message or "è½¬è´¦" in message:
        print(f"âŒ è‡ªåŠ¨æ‹’ç»æ•æ„Ÿæ“ä½œ: {message}")
        return False
    
    # å…¶ä»–æ“ä½œéœ€è¦äººå·¥ç¡®è®¤
    response = input(f"ç¡®è®¤æ‰§è¡Œ {message}ï¼Ÿ(y/n): ")
    return response.lower() == 'y'

agent = PhoneAgent(
    model_config=model_config,
    confirmation_callback=safe_confirmation,
)
```

### 4. è°ƒè¯•æŠ€å·§

```bash
# 1. å¯ç”¨ verbose æ¨¡å¼æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
python main.py --base-url ... --apikey ... "ä»»åŠ¡" 2>&1 | tee debug.log

# 2. æ£€æŸ¥è®¾å¤‡è¿æ¥
adb devices
adb shell dumpsys window | grep mCurrentFocus

# 3. æ‰‹åŠ¨æˆªå›¾æµ‹è¯•
adb shell screencap -p /sdcard/screenshot.png
adb pull /sdcard/screenshot.png

# 4. æ£€æŸ¥ ADB Keyboard
adb shell ime list -s
```

### 5. æ€§èƒ½ä¼˜åŒ–

```python
from phone_agent.agent import AgentConfig

# å‡å°‘æœ€å¤§æ­¥æ•°ä»¥åŠ å¿«æ‰§è¡Œ
agent_config = AgentConfig(
    max_steps=50,  # é»˜è®¤ 100
    verbose=False,  # å…³é—­è¯¦ç»†æ—¥å¿—
)

# ä½¿ç”¨æ›´å¿«çš„æ¨¡å‹
model_config = ModelConfig(
    base_url="...",
    model_name="autoglm-phone",  # é€‰æ‹©æ›´å¿«çš„æ¨¡å‹
    max_tokens=1000,  # å‡å°‘ token æ•°
)
```

---

## ğŸ“š ç¤ºä¾‹ä»£ç 

æŸ¥çœ‹ `examples/` ç›®å½•è·å–æ›´å¤šç¤ºä¾‹ï¼š

- [`basic_usage.py`](examples/basic_usage.py) - åŸºç¡€ç”¨æ³•ç¤ºä¾‹
- [`demo_thinking.py`](examples/demo_thinking.py) - æ€è€ƒè¿‡ç¨‹æ¼”ç¤º

---

## â“ å¸¸è§é—®é¢˜

### 1. ä»»åŠ¡æ‰§è¡Œå¤±è´¥

**åŸå› ï¼š**
- åº”ç”¨æœªå®‰è£…
- ç½‘ç»œé—®é¢˜
- æ¨¡å‹ç†è§£é”™è¯¯

**è§£å†³ï¼š**
```bash
# æ£€æŸ¥åº”ç”¨æ˜¯å¦å®‰è£…
adb shell pm list packages | grep åº”ç”¨åŒ…å

# é‡è¯•ä»»åŠ¡
agent.reset()
agent.run("ä»»åŠ¡æè¿°")
```

### 2. æ— æ³•è¾“å…¥ä¸­æ–‡

**åŸå› ï¼š** ADB Keyboard æœªå¯ç”¨

**è§£å†³ï¼š**
```bash
# å¯ç”¨ ADB Keyboard
adb shell ime enable com.android.adbkeyboard/.AdbIME

# è®¾ç½®ä¸ºé»˜è®¤è¾“å…¥æ³•
adb shell ime set com.android.adbkeyboard/.AdbIME
```

### 3. æˆªå›¾å¤±è´¥

**åŸå› ï¼š** åº”ç”¨ç¦æ­¢æˆªå›¾ï¼ˆå¦‚é“¶è¡Œåº”ç”¨ï¼‰

**è§£å†³ï¼š** AI ä¼šè‡ªåŠ¨æ£€æµ‹å¹¶è¯·æ±‚äººå·¥æ¥ç®¡

---

## ğŸ“ è¿›é˜¶å­¦ä¹ 

1. **é˜…è¯»æºç **
   - `phone_agent/agent.py` - Agent æ ¸å¿ƒé€»è¾‘
   - `phone_agent/actions/handler.py` - åŠ¨ä½œæ‰§è¡Œå™¨
   - `phone_agent/model/client.py` - æ¨¡å‹å®¢æˆ·ç«¯

2. **è‡ªå®šä¹‰å¼€å‘**
   - æ·»åŠ æ–°çš„æ“ä½œç±»å‹
   - é›†æˆå…¶ä»– AI æ¨¡å‹
   - å¼€å‘è‡ªå®šä¹‰æ’ä»¶

3. **è´¡çŒ®ä»£ç **
   - Fork é¡¹ç›®
   - æäº¤ Pull Request
   - å‚ä¸ç¤¾åŒºè®¨è®º

---

**ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼** ğŸ‰

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ [README.md](README.md) æˆ–æäº¤ Issueã€‚
