# Phone Agent å¯åŠ¨æ•™ç¨‹

æœ¬æ•™ç¨‹å°†æŒ‡å¯¼ä½ ä»é›¶å¼€å§‹å¯åŠ¨ Phone Agent é¡¹ç›®ã€‚

## ğŸ“‹ å‰ç½®è¦æ±‚

### 1. ç¡¬ä»¶è¦æ±‚
- âœ… ä¸€å° Mac/Windows/Linux ç”µè„‘
- âœ… ä¸€å° Android 7.0+ æˆ– HarmonyOS è®¾å¤‡
- âœ… ä¸€æ ¹æ”¯æŒæ•°æ®ä¼ è¾“çš„ USB æ•°æ®çº¿ï¼ˆä¸æ˜¯ä»…å……ç”µçº¿ï¼‰

### 2. è½¯ä»¶è¦æ±‚
- âœ… Python 3.10 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼ˆæ¨è 3.13ï¼‰
- âœ… ADB å·¥å…·ï¼ˆAndroidï¼‰æˆ– HDC å·¥å…·ï¼ˆHarmonyOSï¼‰

---

## ğŸš€ ç¬¬ä¸€æ­¥ï¼šå®‰è£… Python ç¯å¢ƒ

### macOS
```bash
# æ£€æŸ¥ Python ç‰ˆæœ¬
python3 --version

# å¦‚æœç‰ˆæœ¬ä½äº 3.10ï¼Œä½¿ç”¨ Homebrew å®‰è£…æœ€æ–°ç‰ˆæœ¬
brew install python@3.13
```

### Windows
1. è®¿é—® [Python å®˜ç½‘](https://www.python.org/downloads/)
2. ä¸‹è½½ Python 3.10+ å®‰è£…åŒ…
3. å®‰è£…æ—¶å‹¾é€‰ "Add Python to PATH"

### Linux
```bash
# Ubuntu/Debian
sudo apt update
sudo apt install python3.10 python3-pip python3-venv

# CentOS/RHEL
sudo yum install python3 python3-pip
```

---

## ğŸ”§ ç¬¬äºŒæ­¥ï¼šå®‰è£… ADB å·¥å…·

### macOS
```bash
# ä½¿ç”¨ Homebrew å®‰è£…
brew install android-platform-tools

# éªŒè¯å®‰è£…
adb version
```

### Windows
1. ä¸‹è½½ [Android Platform Tools](https://developer.android.com/studio/releases/platform-tools)
2. è§£å‹åˆ°ä»»æ„ç›®å½•ï¼ˆå¦‚ `C:\adb`ï¼‰
3. å°†è¯¥ç›®å½•æ·»åŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡ PATH ä¸­
4. é‡å¯å‘½ä»¤è¡Œï¼Œè¿è¡Œ `adb version` éªŒè¯

### Linux
```bash
# Ubuntu/Debian
sudo apt install android-tools-adb

# éªŒè¯å®‰è£…
adb version
```

---

## ğŸ“± ç¬¬ä¸‰æ­¥ï¼šé…ç½® Android è®¾å¤‡

### 1. å¯ç”¨å¼€å‘è€…æ¨¡å¼
1. æ‰“å¼€æ‰‹æœº `è®¾ç½®`
2. æ‰¾åˆ° `å…³äºæ‰‹æœº` æˆ– `å…³äºè®¾å¤‡`
3. æ‰¾åˆ° `ç‰ˆæœ¬å·` æˆ– `Build å·`
4. **è¿ç»­å¿«é€Ÿç‚¹å‡» 7-10 æ¬¡**ï¼Œç›´åˆ°æç¤º"æ‚¨å·²å¤„äºå¼€å‘è€…æ¨¡å¼"

### 2. å¯ç”¨ USB è°ƒè¯•
1. è¿”å› `è®¾ç½®`
2. æ‰¾åˆ° `å¼€å‘è€…é€‰é¡¹`ï¼ˆé€šå¸¸åœ¨ `ç³»ç»Ÿ` æˆ– `æ›´å¤šè®¾ç½®` ä¸­ï¼‰
3. å¼€å¯ä»¥ä¸‹é€‰é¡¹ï¼š
   - âœ… **USB è°ƒè¯•**
   - âœ… **USB è°ƒè¯•ï¼ˆå®‰å…¨è®¾ç½®ï¼‰**ï¼ˆéƒ¨åˆ†æœºå‹éœ€è¦ï¼‰
   - âœ… **USB å®‰è£…**ï¼ˆéƒ¨åˆ†æœºå‹éœ€è¦ï¼‰

![å¼€å‘è€…é€‰é¡¹ç¤ºä¾‹](resources/screenshot-20251209-181423.png)

### 3. è¿æ¥è®¾å¤‡å¹¶æˆæƒ
1. ç”¨ USB æ•°æ®çº¿è¿æ¥æ‰‹æœºåˆ°ç”µè„‘
2. æ‰‹æœºä¼šå¼¹å‡º "å…è®¸ USB è°ƒè¯•å—ï¼Ÿ" çš„æç¤º
3. **å‹¾é€‰ "å§‹ç»ˆå…è®¸ä½¿ç”¨è¿™å°è®¡ç®—æœºè¿›è¡Œè°ƒè¯•"**
4. ç‚¹å‡» **"å…è®¸"**

### 4. éªŒè¯è¿æ¥
```bash
adb devices
```

**æœŸæœ›è¾“å‡ºï¼š**
```
List of devices attached
1234567890ABCDEF    device
```

> âš ï¸ å¦‚æœæ˜¾ç¤º `unauthorized`ï¼Œè¯·åœ¨æ‰‹æœºä¸Šé‡æ–°æˆæƒ
> 
> âš ï¸ å¦‚æœæ²¡æœ‰æ˜¾ç¤ºè®¾å¤‡ï¼Œè¯·æ£€æŸ¥ï¼š
> - USB çº¿æ˜¯å¦æ”¯æŒæ•°æ®ä¼ è¾“
> - æ˜¯å¦å·²å¯ç”¨ USB è°ƒè¯•
> - å°è¯•æ›´æ¢ USB æ¥å£æˆ–é‡å¯ ADBï¼š`adb kill-server && adb start-server`

---

## ğŸ“¦ ç¬¬å››æ­¥ï¼šå®‰è£…é¡¹ç›®ä¾èµ–

### 1. å…‹éš†æˆ–ä¸‹è½½é¡¹ç›®
```bash
# å¦‚æœä½¿ç”¨ Git
git clone https://github.com/Flowers-hurt/Open-AutoGLM.git
cd Open-AutoGLM

# æˆ–è€…ç›´æ¥ä¸‹è½½ ZIP å¹¶è§£å‹
```

### 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# macOS/Linux:
source venv/bin/activate

# Windows:
venv\Scripts\activate
```

æ¿€æ´»æˆåŠŸåï¼Œå‘½ä»¤è¡Œå‰é¢ä¼šæ˜¾ç¤º `(venv)`ã€‚

### 3. å®‰è£…ä¾èµ–
```bash
# å‡çº§ pip
pip install --upgrade pip

# å®‰è£…é¡¹ç›®ä¾èµ–
pip install -r requirements.txt

# å®‰è£… phone-agent åŒ…ï¼ˆå¯ç¼–è¾‘æ¨¡å¼ï¼‰
pip install -e .
```

**å®‰è£…æˆåŠŸæ ‡å¿—ï¼š**
```
Successfully installed phone-agent-0.1.0
Successfully installed Pillow-12.0.0 openai-2.14.0 requests-2.32.5 ...
```

---

## ğŸ¹ ç¬¬äº”æ­¥ï¼šå®‰è£… ADB Keyboardï¼ˆä»… Androidï¼‰

> âš ï¸ **HarmonyOS è®¾å¤‡è·³è¿‡æ­¤æ­¥éª¤**

### 1. ä¸‹è½½ ADB Keyboard
- ä¸‹è½½åœ°å€ï¼š[ADBKeyboard.apk](https://github.com/senzhk/ADBKeyBoard/blob/master/ADBKeyboard.apk)

### 2. å®‰è£…åˆ°è®¾å¤‡
```bash
adb install ADBKeyboard.apk
```

### 3. å¯ç”¨ ADB Keyboard
**æ–¹å¼ä¸€ï¼šæ‰‹åŠ¨å¯ç”¨**
1. æ‰“å¼€æ‰‹æœº `è®¾ç½®`
2. æ‰¾åˆ° `ç³»ç»Ÿ` â†’ `è¯­è¨€å’Œè¾“å…¥æ³•` â†’ `è™šæ‹Ÿé”®ç›˜`
3. å¯ç”¨ **ADB Keyboard**

**æ–¹å¼äºŒï¼šå‘½ä»¤å¯ç”¨**
```bash
adb shell ime enable com.android.adbkeyboard/.AdbIME
```

### 4. éªŒè¯å®‰è£…
```bash
adb shell ime list -s
```

è¾“å‡ºåº”åŒ…å«ï¼š
```
com.android.adbkeyboard/.AdbIME
```

---

## ğŸ¤– ç¬¬å…­æ­¥ï¼šé…ç½®æ¨¡å‹æœåŠ¡

Phone Agent éœ€è¦ AI æ¨¡å‹æ¥ç†è§£å±å¹•å’Œç”Ÿæˆæ“ä½œã€‚ä½ å¯ä»¥é€‰æ‹©ä»¥ä¸‹ä»»ä¸€æ–¹å¼ï¼š

### æ–¹å¼ Aï¼šä½¿ç”¨ç¬¬ä¸‰æ–¹ API æœåŠ¡ï¼ˆæ¨èæ–°æ‰‹ï¼‰

#### é€‰é¡¹ 1ï¼šæ™ºè°± BigModel
1. è®¿é—® [æ™ºè°± AI å¼€æ”¾å¹³å°](https://open.bigmodel.cn)
2. æ³¨å†Œè´¦å·å¹¶è·å– API Key
3. è®°å½•ä»¥ä¸‹ä¿¡æ¯ï¼š
   - Base URL: `https://open.bigmodel.cn/api/paas/v4`
   - Model: `autoglm-phone`
   - API Key: `ä½ çš„å¯†é’¥`

#### é€‰é¡¹ 2ï¼šModelScope
1. è®¿é—® [ModelScope](https://modelscope.cn)
2. æ³¨å†Œè´¦å·å¹¶è·å– API Key
3. è®°å½•ä»¥ä¸‹ä¿¡æ¯ï¼š
   - Base URL: `https://api-inference.modelscope.cn/v1`
   - Model: `ZhipuAI/AutoGLM-Phone-9B`
   - API Key: `ä½ çš„å¯†é’¥`

### æ–¹å¼ Bï¼šæœ¬åœ°éƒ¨ç½²æ¨¡å‹ï¼ˆé€‚åˆé«˜çº§ç”¨æˆ·ï¼‰

å‚è€ƒ [README.md æ¨¡å‹éƒ¨ç½²ç« èŠ‚](README.md#é€‰é¡¹-b-è‡ªè¡Œéƒ¨ç½²æ¨¡å‹) è¿›è¡Œæœ¬åœ°éƒ¨ç½²ã€‚

---

## âœ… ç¬¬ä¸ƒæ­¥ï¼šè¿è¡Œ Phone Agent

### 1. ä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰
```bash
# è¿è¡Œå¯åŠ¨è„šæœ¬
./start.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
- æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
- æ£€æŸ¥è®¾å¤‡è¿æ¥
- æ˜¾ç¤ºä½¿ç”¨è¯´æ˜

### 2. æ‰‹åŠ¨å¯åŠ¨

#### ä½¿ç”¨ç¬¬ä¸‰æ–¹ API
```bash
# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source venv/bin/activate  # macOS/Linux
# æˆ–
venv\Scripts\activate  # Windows

# ä½¿ç”¨æ™ºè°± BigModel
python main.py \
  --base-url https://open.bigmodel.cn/api/paas/v4 \
  --model autoglm-phone \
  --apikey ä½ çš„APIå¯†é’¥ \
  "æ‰“å¼€ç¾å›¢æœç´¢é™„è¿‘çš„ç«é”…åº—"

# ä½¿ç”¨ ModelScope
python main.py \
  --base-url https://api-inference.modelscope.cn/v1 \
  --model ZhipuAI/AutoGLM-Phone-9B \
  --apikey ä½ çš„APIå¯†é’¥ \
  "æ‰“å¼€ç¾å›¢æœç´¢é™„è¿‘çš„ç«é”…åº—"
```

#### ä½¿ç”¨æœ¬åœ°æ¨¡å‹
```bash
python main.py \
  --base-url http://localhost:8000/v1 \
  --model autoglm-phone-9b \
  "æ‰“å¼€ç¾å›¢æœç´¢é™„è¿‘çš„ç«é”…åº—"
```

### 3. è¿›å…¥äº¤äº’æ¨¡å¼
```bash
python main.py \
  --base-url https://open.bigmodel.cn/api/paas/v4 \
  --model autoglm-phone \
  --apikey ä½ çš„APIå¯†é’¥

# ç„¶åè¾“å…¥ä»»åŠ¡ï¼Œä¾‹å¦‚ï¼š
# Enter your task: æ‰“å¼€æ·˜å®æœç´¢æ— çº¿è€³æœº
```

---

## ğŸ‰ æˆåŠŸæ ‡å¿—

å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œä½ ä¼šçœ‹åˆ°ï¼š

```
ğŸ” æ­£åœ¨æ£€æŸ¥ç³»ç»Ÿè¦æ±‚...
--------------------------------------------------
1. Checking ADB installation... âœ… OK (Android Debug Bridge version 1.0.41)
2. Checking connected devices... âœ… OK (1 device(s): 1234567890ABCDEF)
3. Checking ADB Keyboard... âœ… OK
--------------------------------------------------
âœ… All system checks passed!

ğŸ” æ­£åœ¨æ£€æŸ¥æ¨¡å‹ API...
--------------------------------------------------
1. Checking API connectivity (https://open.bigmodel.cn/api/paas/v4)... âœ… OK
--------------------------------------------------
âœ… Model API checks passed!

==================================================
Phone Agent - AI-powered phone automation
==================================================
Model: autoglm-phone
Base URL: https://open.bigmodel.cn/api/paas/v4
Max Steps: 100
Language: cn
Device Type: ADB
Device: 1234567890ABCDEF (auto-detected)
==================================================

Task: æ‰“å¼€ç¾å›¢æœç´¢é™„è¿‘çš„ç«é”…åº—

ğŸ’­ æ€è€ƒè¿‡ç¨‹:
--------------------------------------------------
å½“å‰åœ¨ç³»ç»Ÿæ¡Œé¢ï¼Œéœ€è¦å…ˆå¯åŠ¨ç¾å›¢åº”ç”¨
--------------------------------------------------
ğŸ¯ æ‰§è¡ŒåŠ¨ä½œ:
{
  "_metadata": "do",
  "action": "Launch",
  "app": "ç¾å›¢"
}
==================================================
```

---

## â“ å¸¸è§é—®é¢˜

### 1. è®¾å¤‡æœªæ‰¾åˆ°
```bash
# é‡å¯ ADB æœåŠ¡
adb kill-server
adb start-server
adb devices
```

### 2. æƒé™è¢«æ‹’ç»
- æ£€æŸ¥æ‰‹æœºä¸Šæ˜¯å¦ç‚¹å‡»äº†"å…è®¸"
- é‡æ–°æ’æ‹” USB çº¿
- å°è¯•æ›´æ¢ USB æ¥å£

### 3. ADB Keyboard æ— æ³•è¾“å…¥
```bash
# æ£€æŸ¥æ˜¯å¦å·²å¯ç”¨
adb shell ime list -s

# æ‰‹åŠ¨å¯ç”¨
adb shell ime enable com.android.adbkeyboard/.AdbIME
```

### 4. æ¨¡å‹ API è¿æ¥å¤±è´¥
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- éªŒè¯ API Key æ˜¯å¦æ­£ç¡®
- ç¡®è®¤ Base URL æ˜¯å¦æ­£ç¡®

### 5. Python ç‰ˆæœ¬ä¸å…¼å®¹
```bash
# æ£€æŸ¥ Python ç‰ˆæœ¬
python3 --version

# å¿…é¡»æ˜¯ 3.10 æˆ–æ›´é«˜ç‰ˆæœ¬
```

---

## ğŸ“š ä¸‹ä¸€æ­¥

- æŸ¥çœ‹ [ä½¿ç”¨æ•™ç¨‹.md](ä½¿ç”¨æ•™ç¨‹.md) å­¦ä¹ æ›´å¤šåŠŸèƒ½
- é˜…è¯» [README.md](README.md) äº†è§£å®Œæ•´æ–‡æ¡£
- æ¢ç´¢ [examples/](examples/) ç›®å½•æŸ¥çœ‹ç¤ºä¾‹ä»£ç 

---

## ğŸ’¡ å°è´´å£«

1. **é¦–æ¬¡ä½¿ç”¨å»ºè®®ä½¿ç”¨ç¬¬ä¸‰æ–¹ API**ï¼Œé¿å…æœ¬åœ°éƒ¨ç½²çš„å¤æ‚æ€§
2. **ä¿æŒæ‰‹æœºå±å¹•å¸¸äº®**ï¼Œé¿å…é”å±å½±å“æ“ä½œ
3. **ä½¿ç”¨äº¤äº’æ¨¡å¼**å¯ä»¥æ›´çµæ´»åœ°æµ‹è¯•ä¸åŒä»»åŠ¡
4. **æŸ¥çœ‹ verbose è¾“å‡º**äº†è§£ AI çš„æ€è€ƒè¿‡ç¨‹ï¼š`--verbose` æˆ–åœ¨ä»£ç ä¸­è®¾ç½® `verbose=True`

---

**ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼** ğŸŠ
